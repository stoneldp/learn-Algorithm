## 什么叫编译程序？
- 现代计算机系统一般都含有不止一个的高级语言编译程序，对于有些高级语言甚至配置了几个不同性能的编译程序，供用户按不同需要进行选择。高级语言编译程序是计算机系统软件最重要的组成部分之一，也是用户最直接关心的工具之一。

- 在计算机上执行一个高级语言程序一般要分为两步：
  - 第一步，用一个编译程序把高级语言翻译成机器语言程序；
  - 第二步，运行所得的机器语言程序求得计算结果。

### 翻译程序(Translator)
 - 把 **某一种语言程序(称为源语言程序)**  <u>等价地转换成</u>  **另一种语言程序(称为目标语言程序)** 的程序

### 编译程序(Compiler)
 - 把 **某一种高级语言程序** <u>等价的转换成</u> **另一种低级语言程序** (如汇编语言或机器语言程序)的程序
- 分类
  - **诊断编译程序(Diagnoctic Comoiler)**: 专门用于帮助程序开发和调试的编译程序
  - **优化编译程序(Optimizing Compiler)**:着重于提高目标代码效率的编译程序
  - **交叉编译程序(Cross Compiler)**:现在很多编译程序同时提供了调试、优化等多种功能，用户可以通过“开关”进行选择。运行编译程序的计算机成为宿主机，运行编译程序所产生目标代码的计算机称为目标机。如果一个编译程序产生不同于其宿主机的机器代码
  - **可变编译程序(Retargetable Compiler)**:如果不需重写编译程序中与机器无关的部分就能改变目标机

### 解释程序(Interpreter)
- 把源语言写的 **源程序**作为输入，但不产生目标程序，而是**边解释边执行**源程序

### 计算机科学与技术中学到什么？
 - 理解计算系统
 - 设计计算系统
 - 训练计算思维(Computational Thinking)
   - [概念]：**计算思维**是运用计算机科学的基础概念去求解问题、设计系统和理解人类的行为，包括了一系列广泛的计算机科学的思维方法。
   - **计算思维方法运用于**
     - [x] 抽象(Abstraction)
       - 忽略一个主题中与当前问题（或目标）无关的那些方面，以便更充分地注意与当前问题（或目标）有关的问题。
       - 从众多的事务中抽取出共同的，本质性的特征，舍弃其非本质的特征
       - 是一种从个体把握一般、从现象把握本质的认知过程和思维方法。
     - [x] 自动化
       - 将抽象思维的结果在计算机上实现，是一个将计算思维成果物化的过程，也是将理论成果应用于技术的实践
       - 自动化的思维方法不仅体现在编译程序本身的工作机制上，更体现在了编译程序的生成工具的研究和设计上。
     - [x] 问题分解
       - 将大规模的复杂问题分解成若干个较小规模的、更简单的问题加以解决。
         - 1.对问题本身进行明确描述，并对问题解决法作出全局决策
         - 2.把问题分解成相对独立的子问题
         - 3.再以同样的方式对每个子问题进一步分解，直到获得对问题的明确的答案。
     - [x] 递归
       - 问题的解决依赖于类似问题的解决，只不过后者的复杂度或规模较原来的问题更小。
       - 一旦将问题的复杂度和规模化简到足够小时，问题解决其实非常简单。
     - [x] 权衡
     - [x] 保护、冗余、容错、纠错和恢复
     - [x] 利用启发式推理来寻求解答
     - [x] 在不确定情况下的规划、学习和调度
     - ...... 
 ### 编译过程
 - 编译过程概述 编译程序的工作，从输入源程序开始到输出目标程序为止的整个过程，是非常复杂的。但就其过程而言，它与人们进行自然语言之间的翻译有着许多相近之处。当我们把一种文字翻译为另一种文字，例如把一段英文翻译为中文时，通常需要经过以下步骤：

- 编译程序的工作过程一般也可以划分为五个阶段：
  - 词法分析、
  - 语法分析、
  - 语义分析与中间代码产生、
  - 优化、
  - 目标代码生成。

- [x] **第一阶段 : 词法分析**
  - 词法分析的任务是：输入源程序，对构成源程序的字符串进行扫描和分解，识别出一个个的单词（也称单词符号或简称符号），如基本字（begin、end、if、for、while等），标识符、常数、算符和界符（标点符号、左右括号等）。
```
  -  例如、对于Pascal的循环语句
for I := 1 to 100 do

词法分析的结果是识别出如下的单词符号： 基本字 for 标识符 I 赋值号 := 整常数 1 基本字 to 整常数 100 基本字 do
```
  -   这些单词是组成上述Pascal语句的基本符号。单词符号是语言的基本组成成分，是人们理解和编写程序的基本要素。识别和理解这些要素无疑也是翻译的基础。在词法分析阶段的工作中所依循的是语言的词法规则（或称构词规则）。描述词法规则的有效工具是正规式和有限自动机。

- [x] **第二阶段，语法分析。**
  - 语法分析的任务是：在词法分析的基础上，根据语言的语法规则，把单词符号串分解成各类语法单位（语法范畴），如“短语”、“子句“、”句子“（“语句”）、”程序段“和”程序“等。通过语法分析，确定整个输入串是否构成语法上正确的”程序“。语法分析所依循的是语言的语法规则。语法规则通常用上下文无关文法描述。词法分析是一种线性分析，而语法分析是一种层次结构分析。例如，在很多语言中，符号串 Z := X + 0.618* Y 代表一个”赋值语句“，而其中的 X + 0.618 * Y 代表一个”算数表达式“。因而，语法分析的任务就是识别 X + 0.618 * Y 为算术表达式，同时，识别上述整个符号串属于赋值语句这个范畴。

- [x] **第三阶段，语义分析与中间代码产生。**
  - 这一阶段的任务是：对语法分析所识别的各类语法范畴，分析其含义，并进行初步翻译（产生中间代码）。这一阶段通常包括两个方面的工作。首先，对每种语法范畴进行静态语义检查，例如，变量是否定义、类型是否正确等。如果语义正确，则进行另一方面的工作，即进行中间代码的翻译。这一阶段所依循的是语言的语义规则。通常使用属性文法描述语义规则。 所谓”中间代码“是一种含义明确、便于处理的几号系统，它通常独立于具体的硬件。这种记号系统或者与现代计算机的指令形式有某种程度的接近，或者能够比较容易地把它变换成现代计算机的机器指令。例如，许多编译程序采用了一种与”三地址指令“非常近似的”四元式“作为中间代码。这种四元式的形式是：

  - 算符 左操作数 右操作数 结果 它的意义是：对“左、右、操作数”进行某种运算（由“算符”指明），把运算所得的值作为“结果”保留下来。在采用四元式作为中间代码的情形下，中间代码产生的任务就是按语言的语义规则把各类语法范畴翻译成四元式序列。例如，下面的赋值句： Z := ( X + 0.418 ) * Y / W 可被翻译为如下的四元式序列：

  - 序号 算符 左操作数 右操作数 结果 1 + X 0.418 T1 2 * T1 Y T2 3 / T2 W Z 其中，T1和T2是编译期间引进的临时工作变量；第一个四元式意味着把X的值加上0.418存放于T1中；第二个四元式指将T1的值和Y的值相乘存于T2中；第三个四元式指将T2的值除以Y的值保留结果于Z中。 一般而言，中间代码是一种独立于具体硬件的记号系统。常用的中间代码，除了四元式之外，还有三元式、间接三元式、逆波兰记号和树形表示等。

- [x] **第四阶段，优化。**
  - 优化的任务在于对前段产生的中间代码进行加工交换，以期在最后阶段能产生出更为高效（省时间和空间）的目标代码。优化的主要方面有：公共子表达式的提取、循环优化、删除无用代码等。有时，为了便于“并行运算”，还可以对代码进行并行化处理。优化所依循的原则是程序的等价变换原则。例如，如果我们把程序片段：

  - for K := 1 to 100 do begin M := I + 10 * K; N := J + 10 * K end 1 2 3 4 5 6 的中间代码：
```
序号	OP	ARG1	ARG2	RESULT	注释
1	：=	1		K	K := 1
2	<	100	k	(9)	若100 < K 转至第(9)个四元式
3	*	10	K	T1	T1 := 10 * K; T1为临时变量
4	+	I	T1	M	M := I + T1
5	*	10	K	T2	T2 := 10*K; T2为临时变量
6	+	J	T2	N	N := J + T2
7	+	K	1	K	K := K + 1
8	j			(2)	转至第(2)个四元式
9
```
转换成如下的等价代码：

- 序号 OP ARG1 ARG2 RESULT 注释 1 ：= I M M := I 2 ：= J N N := J 3 ：= 1 K K := 1 4 < 100 K (9) if(100 < k) goto (9) 5 + M 10 M M := M + 10 6 + N 10 N M := N + 10 7 + K 1 K K := K + 1 8 j (4) goto （4） 9 那么，最终所得的目标程序的执行效率就肯定会提高很多。对于前者，在循环中需要做300次假发和200次乘法；对于后者，在循环中只需做300次加法。尤其是，在多数硬件中，乘法的时间比加法的时间要长的多。

- [x] **第五阶段，目标代码生成。**
  - 这一阶段的任务是：把中间代码（或经优化处理之后）变换成特定机器上的低级语言代码。这阶段实现了最后的翻译，它的工作依赖于硬件系统结构和机器指令含义。这阶段工作非常复杂，涉及到硬件系统功能部件的运用，机器指令的选择，各种数据类型变量的存储空间分配，以及寄存器和后援寄存器的调度，等等。如何产生出足以充分发挥硬件效率的目标代码是一件非常不容易的事情。 目标代码的形式可以是绝对指令代码或可重定位的指令代码或汇编指令代码。如目标代码是绝对指令代码，则这种目标代码可立即执行。如果目标代码是汇编指令代码，则需汇编器汇编之后才能运行。必须指出，现代多数实用编译程序所产生的目标代码都是一种可重定位的指令代码。这种目标代码在运行前必须借助于一个连接装配程序把各个目标模块（包括系统提供的库模块）连接在一起，确定程序变量（或常数）在主存中的位置，装入贮存中指定的起始地址，使之成为一个可以运行的绝对指令代码程序。 

